<!doctype html>
<html lang="en">

  <head>
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
    <meta charset="utf-8">
    <style>body { font-family: Ubuntu, sans-serif; }</style>
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin">

    <title>Phone WTF</title>
    <meta name="description" content="The HTML5 Herald">
    <meta name="author" content="SitePoint">

    <link rel="stylesheet" type="text/css" href="/static/stylesheets/style.css">
    <script src="/static/js/jquery-1.11.3.min.js"> </script>
    <script type="text/javascript" src="//static.twilio.com/libs/twiliojs/1.2/twilio.min.js"> </script>

	<script>

	Twilio.Device.setup('{{ twilio_token }}');

	Twilio.Device.ready(function(device) {
	      //The device is now ready
	      console.log("Twilio.Device is now ready for connections");
	});

	Twilio.Device.offline(function(){
	    console.log("broke");
	});

	Twilio.Device.disconnect(function (conn) {
	   console.log("Call ended");
	});

	function call() {
	    $(document).ready(function(){
		var p1 = $("#p1").val();
		var p2 = $("#p2").val(); 
		var p3 = $("#p3").val();
		var p4 = $("#p4").val();
		var p5 = $("#p5").val();
		var p6 = $("#p6").val();
        var twilio_obj = {player1: p1, player2: p2, player3: p3, player4: p4, player5: p5, player6: p6};        
		Twilio.Device.connect(twilio_obj).mute(true);
	    });
	}

	function hangup(){
	   Twilio.Device.disconnectAll(); 
	}

	</script>
  </head>

  <body>

	  <a href="https://github.com/nickgirardo/PhoneWtf"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>

	  <nav>
	  <ul>
		  <li><a href="/">Home</a></li>
		  <li><a href="/about">About</a></li>
		  <li><a href="/support">Support</a></li>
	  </ul>
	  </nav>

	  <center>
    <br>
    <br>
    <br>
    <p>PhoneWTF</p>

    <br>
    <form action="action_page.php">

    <input type="text" id="p1" class="dingus" name="phonenum1" placeholder="Enter Phone Number 1">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="text" id="p2" class="dingus" name="phonenum2" placeholder="Enter Phone Number 2">

	<span id='down-arrow'><img src="/static/img/down.png" height="20" width="20" style="position: absolute"></span> 
	<span id='up-arrow'><img src="/static/img/up.png" height="20" width="20" style="position: absolute"></span> 

	<br>
	<div id="hidden-numbers" style="display:none">
		<input type="text" id="p3" class="dingus" name="phonenum3" placeholder="Enter Phone Number 3">
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="text" id="p4" class="dingus" name="phonenum4" placeholder="Enter Phone Number 4">
		<br>
		<input type="text" id="p5" class="dingus" name="phonenum5" placeholder="Enter Phone Number 5">
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		<input type="text" id="p6" class="dingus" name="phonenum6" placeholder="Enter Phone Number 6">
	</div>

	<div style='display:none'>
	</div>



    <br><br>
    <br>
    </form>

    <button id='call-button' type='button'>PhoneWTF</button>
    <button id='hangup-button' type='button' style='display:none'>End Call</button>
    </center>

    <script src="https://js.braintreegateway.com/v2/braintree.js"></script>

	<script>
	// We generated a client token for you so you can test out this code
	// immediately. In a production-ready integration, you will need to
	// generate a client token on your server (see section below).
	var clientToken = "{{ token }}";

	braintree.setup(clientToken, "dropin", {
	  container: "payment-form"
	});
	</script>
<script>
$(document).ready(function(){
        $('#donate').click(function(){$('#ppal').toggle('fast');});
        });

		var upArrow = $('#up-arrow').clone();
		var downArrow = $('#down-arrow').clone();

		$('#down-arrow').click(function(){
			$('#down-arrow').hide();
			$('#up-arrow').show();
		   	$('#hidden-numbers').toggle('fast');
		});

		$('#up-arrow').click(function(){
			$('#down-arrow').show();
			$('#up-arrow').hide();
		   	$('#hidden-numbers').toggle('fast');
		});

		$('#call-button').click(function(){
			$('#call-button').hide();
			$('#hangup-button').show();
			call();
		});

		$('#hangup-button').click(function(){
			$('#call-button').show();
			$('#hangup-button').hide();
			hangup();
		});
</script>


 </body>

</html>
